// swift-tools-version: 6.0
// Generated by swift-plugin-generator 0.1.0

import PackageDescription

let package = Package(
    name: "swift-plugin-subtree",
    platforms: [.macOS(.v13)],
    products: [
        .executable(name: "subtree", targets: ["SubtreeExecutable"]),
        .plugin(name: "SubtreePlugin", targets: ["SubtreePlugin"])
    ],
    dependencies: [
        .package(url: "https://github.com/21-DOT-DEV/swift-artifact-parser", exact: "0.0.1")
    ],
    targets: [
        // Executable target - wraps binary using ArtifactParser
        .executableTarget(
            name: "SubtreeExecutable",
            dependencies: [
                .product(name: "ArtifactParser", package: "swift-artifact-parser")
            ]
        ),
        
        // Plugin target - command plugin
        .plugin(
            name: "SubtreePlugin",
            capability: .command(
                intent: .custom(verb: "subtree", description: ""),
                permissions: [.writeToPackageDirectory(reason: "subtree may write output files")]
            ),
            dependencies: ["subtree"]
        ),
        
        // Binary target - references artifact bundle

        .binaryTarget(
            name: "subtree",
            url: "https://github.com/21-DOT-DEV/subtree/releases/download/0.0.5/subtree.artifactbundle.zip",
            checksum: "ed451f8abe832e66f859413cef1086c932520030cb6b3a3d72fce3a2f131d383"
        ),


    ]
)
